//--------------------------------------------------------------------------
// Code generated by the SmartSoft MDSD Toolchain
// The SmartSoft Toolchain has been developed by:
//  
// Service Robotics Research Center
// University of Applied Sciences Ulm
// Prittwitzstr. 10
// 89075 Ulm (Germany)
//
// Information about the SmartSoft MDSD Toolchain is available at:
// www.servicerobotik-ulm.de
//
// Please do not modify this file. It will be re-generated
// running the code generator.
//--------------------------------------------------------------------------
#ifndef _PARAMETERSTATESTRUCTCORE_HH
#define _PARAMETERSTATESTRUCTCORE_HH

#include "aceSmartSoft.hh"

#include "nlohmann/json.hpp"

#include <iostream>

// forward declaration (in order to define validateCOMMIT(ParameterStateStruct) which is implemented in derived class)
class ParameterStateStruct;

class ParameterStateStructCore
{
	friend class ParamUpdateHandler;
public:
	
		///////////////////////////////////////////
		// Internal params
		///////////////////////////////////////////
		
		/**
		 * Definition of Parameter Settings
		 */
		class SettingsType 
		{
			friend class ParamUpdateHandler;
		protected:
			/**
			 * here are the member definitions
			 */
			double no_path_event_timeout;
		
		public:
			// default constructor
			SettingsType() {
				no_path_event_timeout = 5.0;
			}
		
			/**
			 * here are the public getters
			 */
			inline double getNo_path_event_timeout() const { return no_path_event_timeout; }
			
			void to_ostream(std::ostream &os = std::cout) const
			{
				os << "Settings(";
				os << "no_path_event_timeout = " << no_path_event_timeout << ", ";
				os << ")\n";
			}
			
		}; // end class SettingsType
		
	
		///////////////////////////////////////////
		// External params
		///////////////////////////////////////////
		
	
		///////////////////////////////////////////
		// Instance params
		///////////////////////////////////////////
		
		/**
		 * Definition of instantiated ParameterRepository CommNavigationObjects
		 */
		class CommNavigationObjectsType {
			friend class ParamUpdateHandler;
			public:
			/**
			 * Definition of instantiated ParameterSet PlannerParams
			 */
			class PlannerParamsType {
				friend class ParamUpdateHandler;
				public:
				/**
				 * Definition of Parameter ID
				 */
				class IDType {
					friend class ParamUpdateHandler;
				
				protected:
					/**
					 * here are the member definitions
					 */
					unsigned int id;
					
				public:
					// default constructor
					IDType() {
						id = 0;
					}
					
					/**
					 * here are the getter methods
					 */
					inline unsigned int getId() const { return id; }
					
					void to_ostream(std::ostream &os = std::cout) const
					{
						os << "\tID(";
						os << "id = " << id << ", ";
						os << ")\n";
					}
					
				}; // end of parameter class IDType
				
				/**
				 * Definition of Parameter PLANNERMODE
				 */
				class PLANNERMODEType {
					friend class ParamUpdateHandler;
					public:
					/**
					 * Wrapper class for Enum mode
					 */
					class modeType {
					public:
						enum ENUM_mode {
							ENUM_VALUE_UNDEFINED = 0,
							FREE = 1,
							PATHNAV = 2,
							AREANAV = 3
						};
						
						// default constructor
						modeType() { 
							value = ENUM_VALUE_UNDEFINED;
						}
						
						// copy constructor for enum type
						modeType(ENUM_mode e) {
							value = e;
						}
						
						// copy constructor for String type
						modeType(const std::string &literal) {
							from_string(literal);
						}
						
						// from_string assignment operator
						modeType& operator = (const std::string &literal) {
							from_string(literal);
							return *this;
						}
						
						// ENUM operator
						operator ENUM_mode() const {
							return value;
						}
						
						// String operator
						operator std::string() const {
							return to_string();
						}
						
						// compare operator
						bool operator == (const ENUM_mode t) const {
							return this->value == t;
						}
						
						std::string to_string() const {
							std::string result = "";
							switch (value) {
								case AREANAV:
									result = "AREANAV";
									break;
								case FREE:
									result = "FREE";
									break;
								case PATHNAV:
									result = "PATHNAV";
									break;
								default:
									result = "ENUM_VALUE_UNDEFINED";
									break;
							};
							return result;
						}
						
						void from_string(const std::string &literal) {
							if(literal == "FREE") {
								value = FREE;
							} else if(literal == "PATHNAV") {
								value = PATHNAV;
							} else if(literal == "AREANAV") {
								value = AREANAV;
							} else {
								value = ENUM_VALUE_UNDEFINED;
							}
						}
						
						// helper method to easily implement output stream
						void to_ostream(std::ostream &os = std::cout) const {
							os << to_string();
						}
					private:
						ENUM_mode value;
					};
					
					
				
				protected:
					/**
					 * here are the member definitions
					 */
					PLANNERMODEType::modeType mode;
					
				public:
					// default constructor
					PLANNERMODEType() {
						mode = "";
					}
					
					/**
					 * here are the getter methods
					 */
					inline PLANNERMODEType::modeType getMode() const { return mode; }
					
					void to_ostream(std::ostream &os = std::cout) const
					{
						os << "\tPLANNERMODE(";
						os << "mode = " << mode << ", ";
						os << ")\n";
					}
					
				}; // end of parameter class PLANNERMODEType
				
				protected:
					/**
					 * internal members
					 */
					IDType ID;
					PLANNERMODEType PLANNERMODE;
					
				public:
					/**
					 * public getter methods
					 */
					inline IDType getID() const { return ID; }
					inline PLANNERMODEType getPLANNERMODE() const { return PLANNERMODE; }
					
					void to_ostream(std::ostream &os = std::cout) const
					{
						os << "PlannerParams(\n";
						ID.to_ostream(os);
						PLANNERMODE.to_ostream(os);
						os << ")";
					}
			}; // end of parameter-set class PlannerParamsType
			
			protected:
				/**
				 * internal members
				 */
				PlannerParamsType PlannerParams;
			
			public:
				/**
				 * public getter methods
				 */
				inline PlannerParamsType getPlannerParams() const { return PlannerParams; }
				
				void to_ostream(std::ostream &os = std::cout) const
				{
					os << "CommNavigationObjects(\n";
					PlannerParams.to_ostream(os);
					os << ")";
				}
		}; // end of parameter-repository wrapper class CommNavigationObjectsType
	
protected:

	// Internal params
	SettingsType Settings;
	
	// External params
	
	// Instance params (encapsulated in a wrapper class for each instantiated parameter repository)
	CommNavigationObjectsType CommNavigationObjects;
	

	void setContent(const ParameterStateStructCore &commit) {
		// External params
	
		this->CommNavigationObjects = commit.getCommNavigationObjects();
	}

	// special trigger method (user upcall) called before updating parameter global state
	virtual SmartACE::ParamResponseType handleCOMMIT(const ParameterStateStruct &commitState) = 0;
public:
	ParameterStateStructCore() {  }
	virtual ~ParameterStateStructCore() {  }
	
	// internal param getters
	SettingsType getSettings() const {
		return Settings;
	}
	
	// external param getters
	
	// repo wrapper class getter(s)
	CommNavigationObjectsType getCommNavigationObjects() const {
		return CommNavigationObjects;
	}
	
	// helper method to easily implement output stream in derived classes
	void to_ostream(std::ostream &os = std::cout) const
	{
		// Internal params
		Settings.to_ostream(os);
		
		// External params
		
		// Instance params (encapsulated in a wrapper class for each instantiated parameter repository)
		CommNavigationObjects.to_ostream(os);
	}
	
	std::string getAsJSONString() {
		nlohmann::json param;
	
		param["Settings"] = nlohmann::json {
			{"no_path_event_timeout" , getSettings().getNo_path_event_timeout()}
		};
	
		param["PlannerParams"] = nlohmann::json {
			{ "ID", {
				{"id" , getCommNavigationObjects().getPlannerParams().getID().getId()}
			}},
			{ "PLANNERMODE", {
				{"mode" , getCommNavigationObjects().getPlannerParams().getPLANNERMODE().getMode()}
			}}
		};
		
		return param.dump();
	}
};

#endif
