//--------------------------------------------------------------------------
// Code generated by the SmartSoft MDSD Toolchain
// The SmartSoft Toolchain has been developed by:
//  
// Service Robotics Research Center
// University of Applied Sciences Ulm
// Prittwitzstr. 10
// 89075 Ulm (Germany)
//
// Information about the SmartSoft MDSD Toolchain is available at:
// www.servicerobotik-ulm.de
//
// Please do not modify this file. It will be re-generated
// running the code generator.
//--------------------------------------------------------------------------
#include "ParameterUpdateHandler.hh"

#include "ComponentRackDetection.hh"

SmartACE::CommParameterResponse ParamUpdateHandler::handleParameter(const SmartACE::CommParameterRequest& request)
{
	SmartACE::CommParameterResponse answer;
	
	if(request.getParameterDataMode() == SmartACE::ParameterDataMode::NAME){
		answer = handleParametersNamed(request);
	} else {
		answer = handleParametersSequence(request);
	}
	return answer;
}


SmartACE::CommParameterResponse ParamUpdateHandler::handleParametersNamed(const SmartACE::CommParameterRequest& request)
{
	SmartACE::CommParameterResponse answer;
	
	std::string tag = request.getTag();
	for (auto & c: tag) c = toupper(c);
	std::cout<<"PARAMETER: "<<tag<<std::endl;
	
	if (tag == "COMMIT")
	{
		answer.setResponse(globalState.handleCOMMIT(commitState));
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			globalStateLock.acquire();
			// change the content of the globalState, however change only the generated content
			// without affecting potential user member variables (which is more intuitive for the user)
			globalState.setContent(commitState);
			globalStateLock.release();
		} else {
			// the commit validation check returned != OK
			// the commit state is rejected and is not copied into the global state
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ADDALGORITHM")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_algorithm = "";
		if(request.getString("algorithm", temp_algorithm) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: algorithm request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_ADDALGORITHMCore(
			temp_algorithm
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ADDOBJECT")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_type = "";
		if(request.getString("type", temp_type) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: type request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_ADDOBJECTCore(
			temp_type
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ADDSENSOR")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_sensor = "";
		if(request.getString("sensor", temp_sensor) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: sensor request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_ADDSENSORCore(
			temp_sensor
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.BEHAVIOR")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_type = "";
		if(request.getString("type", temp_type) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: type request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_BEHAVIORCore(
			temp_type
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.BELIEF_THRESHOLD")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		double temp_threshold = 0.0;
		if(request.getDouble("threshold", temp_threshold) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD.threshold = temp_threshold;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: threshold request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.CAPTURE")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_CAPTURECore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.CLOUD")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		unsigned int temp_id = 0;
		if(request.getInteger("id", temp_id) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD.id = temp_id;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: id request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.CLUSTERING")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		bool temp_doClustering = false;
		if(request.getBoolean("doClustering", temp_doClustering) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING.doClustering = temp_doClustering;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: doClustering request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.DELALGORITHMS")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_DELALGORITHMSCore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.DELOBJECTS")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_DELOBJECTSCore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.DELSENSORS")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_DELSENSORSCore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ESTIMATEFILLING")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		bool temp_estimateObjectProperties = false;
		if(request.getBoolean("estimateObjectProperties", temp_estimateObjectProperties) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING.estimateObjectProperties = temp_estimateObjectProperties;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: estimateObjectProperties request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.RECOGNIZE")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_viewPointID = "";
		if(request.getString("viewPointID", temp_viewPointID) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: viewPointID request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_RECOGNIZECore(
			temp_viewPointID
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.SETOBJECTID")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		unsigned int temp_id = 0;
		if(request.getInteger("id", temp_id) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID.id = temp_id;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: id request: "<<request<<std::endl;
		}
		
	}
	else
	{
		/////////////////////////////////////////////////////////////////////
		// default new
		std::cout<<"ERROR wrong Parameter!"<<std::endl;
		answer.setResponse(SmartACE::ParamResponseType::INVALID);
	}
	

	std::cout<<"[handleQuery] PARAMETER "<<tag<<" DONE\n\n";

	return answer;
}


SmartACE::CommParameterResponse ParamUpdateHandler::handleParametersSequence(const SmartACE::CommParameterRequest& request)
{
	SmartACE::CommParameterResponse answer;
	
	std::string tag = request.getTag();
	for (auto & c: tag) c = toupper(c);
	std::cout<<"PARAMETER: "<<tag<<std::endl;
	
	if (tag == "COMMIT")
	{
		answer.setResponse(globalState.handleCOMMIT(commitState));
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			globalStateLock.acquire();
			// change the content of the globalState, however change only the generated content
			// without affecting potential user member variables (which is more intuitive for the user)
			globalState.setContent(commitState);
			globalStateLock.release();
		} else {
			// the commit validation check returned != OK
			// the commit state is rejected and is not copied into the global state
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ADDALGORITHM")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_algorithm = "";
		if(request.getString("1", temp_algorithm) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: algorithm request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_ADDALGORITHMCore(
			temp_algorithm
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ADDOBJECT")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_type = "";
		if(request.getString("1", temp_type) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: type request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_ADDOBJECTCore(
			temp_type
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ADDSENSOR")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_sensor = "";
		if(request.getString("1", temp_sensor) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: sensor request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_ADDSENSORCore(
			temp_sensor
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.BEHAVIOR")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_type = "";
		if(request.getString("1", temp_type) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: type request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_BEHAVIORCore(
			temp_type
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.BELIEF_THRESHOLD")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		double temp_threshold = 0.0;
		if(request.getDouble("1", temp_threshold) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD.threshold = temp_threshold;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: threshold request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.CAPTURE")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_CAPTURECore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.CLOUD")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		unsigned int temp_id = 0;
		if(request.getInteger("1", temp_id) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD.id = temp_id;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: id request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.CLUSTERING")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		bool temp_doClustering = false;
		if(request.getBoolean("1", temp_doClustering) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING.doClustering = temp_doClustering;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: doClustering request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.DELALGORITHMS")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_DELALGORITHMSCore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.DELOBJECTS")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_DELOBJECTSCore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.DELSENSORS")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_DELSENSORSCore(
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.ESTIMATEFILLING")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		bool temp_estimateObjectProperties = false;
		if(request.getBoolean("1", temp_estimateObjectProperties) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING.estimateObjectProperties = temp_estimateObjectProperties;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: estimateObjectProperties request: "<<request<<std::endl;
		}
		
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.RECOGNIZE")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK);
		
		std::string temp_viewPointID = "";
		if(request.getString("1", temp_viewPointID) != 0) {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: viewPointID request: "<<request<<std::endl;
		}
		
		if(answer.getResponse() == SmartACE::ParamResponseType::OK) {
			triggerHandler.handleCommObjectRecognitionObjects_ObjectRecognitionParameter_RECOGNIZECore(
			temp_viewPointID
			);
		}
	}
	else if (tag == "COMMOBJECTRECOGNITIONOBJECTS.OBJECTRECOGNITIONPARAMETER.SETOBJECTID")
	{
		answer.setResponse(SmartACE::ParamResponseType::OK); // TODO: this should be decided according to validation checks defined in the model (not yet implemented)
		
		unsigned int temp_id = 0;
		if(request.getInteger("1", temp_id) == 0) {
			commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID.id = temp_id;
		} else {
			answer.setResponse(SmartACE::ParamResponseType::INVALID);
			std::cout<<"ParamUpdateHandler - error parsing value: id request: "<<request<<std::endl;
		}
		
	}
	else
	{
		/////////////////////////////////////////////////////////////////////
		// default new
		std::cout<<"ERROR wrong Parameter!"<<std::endl;
		answer.setResponse(SmartACE::ParamResponseType::INVALID);
	}
	

	std::cout<<"[handleQuery] PARAMETER "<<tag<<" DONE\n\n";

	return answer;
}


ParameterStateStruct ParamUpdateHandler::getGlobalState() const{
	SmartACE::SmartGuard g(globalStateLock);
	return this->globalState;
}


void ParamUpdateHandler::loadParameter(SmartACE::SmartIniParameter &parameter)
{
	/*
	 Parameters can be specified via command line -filename=<filename>

	 With this parameter present:
	 - The component will look for the file in the current working directory,
	 a path relative to the current directory or any absolute path
	 - The component will use the default values if the file cannot be found

	 With this parameter absent:
	 - <Name of Component>.ini will be read from current working directory, if found there
	 - $SMART_ROOT/etc/<Name of Component>.ini will be read otherwise
	 - Default values will be used if neither found in working directory or /etc
	 */

	// load parameters
	try
	{
		// print all known parameters
		parameter.print();

		//
		// load internal parameters (if any)
		//
		// parameter General
		if(parameter.getDouble("General", "init_relative_obj_pose_x", commitState.General.init_relative_obj_pose_x))
		{
			globalState.General.init_relative_obj_pose_x = commitState.General.init_relative_obj_pose_x;
		}
		if(parameter.getDouble("General", "init_relative_obj_pose_y", commitState.General.init_relative_obj_pose_y))
		{
			globalState.General.init_relative_obj_pose_y = commitState.General.init_relative_obj_pose_y;
		}
		if(parameter.getDouble("General", "init_relative_obj_pose_z", commitState.General.init_relative_obj_pose_z))
		{
			globalState.General.init_relative_obj_pose_z = commitState.General.init_relative_obj_pose_z;
		}
		if(parameter.getDouble("General", "max_detection_score", commitState.General.max_detection_score))
		{
			globalState.General.max_detection_score = commitState.General.max_detection_score;
		}
		if(parameter.getString("General", "model_path", commitState.General.model_path))
		{
			globalState.General.model_path = commitState.General.model_path;
		}
		if(parameter.getDouble("General", "obj_depth", commitState.General.obj_depth))
		{
			globalState.General.obj_depth = commitState.General.obj_depth;
		}
		if(parameter.getDouble("General", "obj_height", commitState.General.obj_height))
		{
			globalState.General.obj_height = commitState.General.obj_height;
		}
		if(parameter.getString("General", "obj_types", commitState.General.obj_types))
		{
			globalState.General.obj_types = commitState.General.obj_types;
		}
		if(parameter.getDouble("General", "obj_width", commitState.General.obj_width))
		{
			globalState.General.obj_width = commitState.General.obj_width;
		}
		if(parameter.getDouble("General", "rack_dimension_max_x", commitState.General.rack_dimension_max_x))
		{
			globalState.General.rack_dimension_max_x = commitState.General.rack_dimension_max_x;
		}
		if(parameter.getDouble("General", "rack_dimension_max_y", commitState.General.rack_dimension_max_y))
		{
			globalState.General.rack_dimension_max_y = commitState.General.rack_dimension_max_y;
		}
		if(parameter.getDouble("General", "rack_dimension_max_z", commitState.General.rack_dimension_max_z))
		{
			globalState.General.rack_dimension_max_z = commitState.General.rack_dimension_max_z;
		}
		if(parameter.getDouble("General", "rack_dimension_min_x", commitState.General.rack_dimension_min_x))
		{
			globalState.General.rack_dimension_min_x = commitState.General.rack_dimension_min_x;
		}
		if(parameter.getDouble("General", "rack_dimension_min_y", commitState.General.rack_dimension_min_y))
		{
			globalState.General.rack_dimension_min_y = commitState.General.rack_dimension_min_y;
		}
		if(parameter.getDouble("General", "rack_dimension_min_z", commitState.General.rack_dimension_min_z))
		{
			globalState.General.rack_dimension_min_z = commitState.General.rack_dimension_min_z;
		}
		if(parameter.getDouble("General", "relative_obj_pose_pitch", commitState.General.relative_obj_pose_pitch))
		{
			globalState.General.relative_obj_pose_pitch = commitState.General.relative_obj_pose_pitch;
		}
		if(parameter.getDouble("General", "relative_obj_pose_x", commitState.General.relative_obj_pose_x))
		{
			globalState.General.relative_obj_pose_x = commitState.General.relative_obj_pose_x;
		}
		if(parameter.getDouble("General", "relative_obj_pose_y", commitState.General.relative_obj_pose_y))
		{
			globalState.General.relative_obj_pose_y = commitState.General.relative_obj_pose_y;
		}
		if(parameter.getDouble("General", "relative_obj_pose_z", commitState.General.relative_obj_pose_z))
		{
			globalState.General.relative_obj_pose_z = commitState.General.relative_obj_pose_z;
		}
		if(parameter.getBoolean("General", "send_obstacle_mesh", commitState.General.send_obstacle_mesh))
		{
			globalState.General.send_obstacle_mesh = commitState.General.send_obstacle_mesh;
		}
		// parameter ModelCreation
		if(parameter.getBoolean("ModelCreation", "capture_model", commitState.ModelCreation.capture_model))
		{
			globalState.ModelCreation.capture_model = commitState.ModelCreation.capture_model;
		}
		if(parameter.getBoolean("ModelCreation", "create_model", commitState.ModelCreation.create_model))
		{
			globalState.ModelCreation.create_model = commitState.ModelCreation.create_model;
		}
		if(parameter.getString("ModelCreation", "load_model_path", commitState.ModelCreation.load_model_path))
		{
			globalState.ModelCreation.load_model_path = commitState.ModelCreation.load_model_path;
		}
		if(parameter.getString("ModelCreation", "save_model_path", commitState.ModelCreation.save_model_path))
		{
			globalState.ModelCreation.save_model_path = commitState.ModelCreation.save_model_path;
		}
		if(parameter.getDouble("ModelCreation", "theta", commitState.ModelCreation.theta))
		{
			globalState.ModelCreation.theta = commitState.ModelCreation.theta;
		}
		if(parameter.getDouble("ModelCreation", "transformation_x", commitState.ModelCreation.transformation_x))
		{
			globalState.ModelCreation.transformation_x = commitState.ModelCreation.transformation_x;
		}
		if(parameter.getDouble("ModelCreation", "transformation_y", commitState.ModelCreation.transformation_y))
		{
			globalState.ModelCreation.transformation_y = commitState.ModelCreation.transformation_y;
		}
		if(parameter.getDouble("ModelCreation", "transformation_z", commitState.ModelCreation.transformation_z))
		{
			globalState.ModelCreation.transformation_z = commitState.ModelCreation.transformation_z;
		}
		
		//
		// load extended parameters (if any)
		//
		
		//
		// load instance parameters (if a parameter definition was instantiated in the model)
		//
		// parameter CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD
		if(parameter.getDouble("CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD", "threshold", commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD.threshold))
		{
			globalState.CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD.threshold = commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.BELIEF_THRESHOLD.threshold;
		}
		// parameter CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD
		if(parameter.getInteger("CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD", "id", commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD.id))
		{
			globalState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD.id = commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLOUD.id;
		}
		// parameter CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING
		if(parameter.getBoolean("CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING", "doClustering", commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING.doClustering))
		{
			globalState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING.doClustering = commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.CLUSTERING.doClustering;
		}
		// parameter CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING
		if(parameter.getBoolean("CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING", "estimateObjectProperties", commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING.estimateObjectProperties))
		{
			globalState.CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING.estimateObjectProperties = commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.ESTIMATEFILLING.estimateObjectProperties;
		}
		// parameter CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID
		if(parameter.getInteger("CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID", "id", commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID.id))
		{
			globalState.CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID.id = commitState.CommObjectRecognitionObjects.ObjectRecognitionParameter.SETOBJECTID.id;
		}

	} catch (const SmartACE::IniParameterError & e)
	{
		std::cerr << "Exception from parameter handling: " << e << std::endl;
	} catch (const std::exception &ex)
	{
		std::cerr << "Uncaught std:: exception" << ex.what() << std::endl;
	} catch (...)
	{
		std::cerr << "Uncaught exception" << std::endl;
	}
}
